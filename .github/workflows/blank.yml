# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:

      # Runs a set of commands using the runners shell
      - name: Run a multi-line script
        run: |
          curl -L -o linux.tar.gz "https://github.com/86maid/ddddocr/releases/download/V6.0.0/linux-x86_64.zip"
          unzip ./linux.tar.gz
          chmod +x ./ddddocr
          ./ddddocr &
          curl -X POST "http://localhost:8000/initialize" \
            -H "Content-Type: application/json" \
            -d '{"ocr": true, "det": false}'
          curl -X POST "http://localhost:8000/ocr" \
            -H "Content-Type: application/json" \
            -d '{
              "image": "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",
              "color_filter_colors": [],
              "png_fix": false,
              "probability": false
            }'
